import{S as e,i as s,s as a,e as n,t,a as r,c,b as o,d as l,f as i,g as f,h as g,j as h,k as d,n as p,l as u,m,o as y,p as k,q as v,r as w}from"./client.50e068d2.js";function x(e){let s,a,u,m,y,k,v,w,x,S,b;return{c(){s=n("a"),a=t("Sessions"),u=r(),m=n("a"),y=t("Sync"),k=r(),v=n("a"),w=t("WLAN"),x=r(),S=n("a"),b=t("System"),this.h()},l(e){s=c(e,"A",{class:!0,rel:!0,href:!0});var n=o(s);a=l(n,"Sessions"),n.forEach(i),u=f(e),m=c(e,"A",{class:!0,rel:!0,href:!0});var t=o(m);y=l(t,"Sync"),t.forEach(i),k=f(e),v=c(e,"A",{class:!0,rel:!0,href:!0});var r=o(v);w=l(r,"WLAN"),r.forEach(i),x=f(e),S=c(e,"A",{class:!0,rel:!0,href:!0});var g=o(S);b=l(g,"System"),g.forEach(i),this.h()},h(){g(s,"class","grow flex align-center plr06"),g(s,"rel","prefetch"),g(s,"href","/session"),g(m,"class","grow flex align-center plr06"),g(m,"rel","prefetch"),g(m,"href","/sync"),g(v,"class","grow flex align-center plr06"),g(v,"rel","prefetch"),g(v,"href","/network"),g(S,"class","grow flex align-center plr06"),g(S,"rel","prefetch"),g(S,"href","/system")},m(e,n){h(e,s,n),d(s,a),h(e,u,n),h(e,m,n),d(m,y),h(e,k,n),h(e,v,n),d(v,w),h(e,x,n),h(e,S,n),d(S,b)},p:p,i:p,o:p,d(e){e&&i(s),e&&i(u),e&&i(m),e&&i(k),e&&i(v),e&&i(x),e&&i(S)}}}function S(e,s,a){let n,t,r;u(e,k,e=>a(1,n=e)),u(e,v,e=>a(3,r=e));const{page:c}=m();async function o(){await k.grab(),console.log("[/:index.svelte] retrying for backend..."),!n.backend.active&&r?"wait"==r.type&&"Waiting for Backend"==r.message?(console.log("[/:index.svelte] ‚ÑπÔ∏è‚≠ïÔ∏è retrying for backend in 3 seconds"),setTimeout(o,3e3)):console.log("[/:index.svelte] ‚ÑπÔ∏è‚úÖ cancelled wait for backend"):v.set(void 0)}return u(e,c,e=>a(2,t=e)),y(async()=>{console.log("[/:index.svelte] üìä onMount main menu..."),await k.grab(),n.backend.active?n.wlan0.ssid||"/"!=t.path&&""!=t.path||w.get("/ping?as=json").then(()=>{console.log("[/:index.svelte] üêá‚úÖ directus successfully pinged")}).catch(()=>{v.set({type:"wlan",message:"Could not connect to API",close:"Skip",actions:[["Setup WLAN","/network"]]})}):(console.log("[/:index.svelte] ‚Ñπ‚ùå no backend, looping..."),v.set({type:"wait",message:"Waiting for Backend",close:"Skip"}),setTimeout(o,3e3))}),[c]}export default class extends e{constructor(e){super(),s(this,e,S,x,a,{})}}
