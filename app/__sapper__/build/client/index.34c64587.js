import{S as e,i as s,s as a,e as t,t as n,a as r,c as l,b as o,d as c,f as i,g as f,h as g,j as d,k as h,n as p,l as u,m as y,o as m,p as v,q as w,r as k}from"./client.8b369788.js";function x(e){let s,a,u,y,m,v,w,k,x,S,b;return{c(){s=t("a"),a=n("Sessions"),u=r(),y=t("a"),m=n("Sync"),v=r(),w=t("a"),k=n("WLAN"),x=r(),S=t("a"),b=n("System"),this.h()},l(e){s=l(e,"A",{class:!0,rel:!0,href:!0});var t=o(s);a=c(t,"Sessions"),t.forEach(i),u=f(e),y=l(e,"A",{class:!0,rel:!0,href:!0});var n=o(y);m=c(n,"Sync"),n.forEach(i),v=f(e),w=l(e,"A",{class:!0,rel:!0,href:!0});var r=o(w);k=c(r,"WLAN"),r.forEach(i),x=f(e),S=l(e,"A",{class:!0,rel:!0,href:!0});var g=o(S);b=c(g,"System"),g.forEach(i),this.h()},h(){g(s,"class","grow flex align-center plr06"),g(s,"rel","prefetch"),g(s,"href","/session"),g(y,"class","grow flex align-center plr06"),g(y,"rel","prefetch"),g(y,"href","/sync"),g(w,"class","grow flex align-center plr06"),g(w,"rel","prefetch"),g(w,"href","/network"),g(S,"class","grow flex align-center plr06"),g(S,"rel","prefetch"),g(S,"href","/system")},m(e,t){d(e,s,t),h(s,a),d(e,u,t),d(e,y,t),h(y,m),d(e,v,t),d(e,w,t),h(w,k),d(e,x,t),d(e,S,t),h(S,b)},p:p,i:p,o:p,d(e){e&&i(s),e&&i(u),e&&i(y),e&&i(v),e&&i(w),e&&i(x),e&&i(S)}}}function S(e,s,a){let t,n,r;u(e,v,e=>a(5,n=e)),u(e,w,e=>a(6,r=e));const{page:l}=y();async function o(){await v.grab(),console.log("[/:index.svelte] retrying for backend..."),!f.active&&r?"wait"==r.type&&"Waiting for Backend"==r.message?(console.log("[/:index.svelte] ℹ️⭕️ retrying for backend in 3 seconds"),setTimeout(o,3e3)):console.log("[/:index.svelte] ℹ️✅ cancelled wait for backend"):w.set(void 0)}let c,i,f;return u(e,l,e=>a(3,t=e)),m(async()=>{console.log("[/:index.svelte] 📊 onMount main menu..."),await v.grab(),f.active?i.ssid||"/"!=t.path&&""!=t.path||k.get("/ping?as=json").then(()=>{console.log("[/:index.svelte] 🐇✅ directus successfully pinged")}).catch(()=>{w.set({type:"wlan",message:"Could not connect to API",close:"Skip",actions:[["Setup WLAN","/network"]]})}):(console.log("[/:index.svelte] ℹ❌ no backend, looping..."),w.set({type:"wait",message:"Waiting for Backend",close:"Skip"}),setTimeout(o,3e3))}),e.$$.update=()=>{32&e.$$.dirty&&a(4,c=n||{}),16&e.$$.dirty&&(i=c.wlan0||{}),16&e.$$.dirty&&(f=c.backend||{})},[l]}export default class extends e{constructor(e){super(),s(this,e,S,x,a,{})}}
