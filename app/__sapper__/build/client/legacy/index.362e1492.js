import{_ as e,a as t,b as n,c as r,i as s,s as a,d as c,S as o,e as i,t as l,f,g as u,h as p,j as h,k as d,l as g,m as v,n as y,o as m,p as x,q as w,r as k,u as S,v as b,w as A,x as $,y as R,z as E}from"./client.e39ef8f4.js";function W(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,a=t(e);if(r){var c=t(this).constructor;s=Reflect.construct(a,arguments,c)}else s=a.apply(this,arguments);return n(this,s)}}function j(e){var t,n,r,s,a,c,o,w,k,S,b;return{c:function(){t=i("a"),n=l("Sessions"),r=f(),s=i("a"),a=l("Sync"),c=f(),o=i("a"),w=l("WLAN"),k=f(),S=i("a"),b=l("System"),this.h()},l:function(e){t=u(e,"A",{class:!0,rel:!0,href:!0});var i=p(t);n=h(i,"Sessions"),i.forEach(d),r=g(e),s=u(e,"A",{class:!0,rel:!0,href:!0});var l=p(s);a=h(l,"Sync"),l.forEach(d),c=g(e),o=u(e,"A",{class:!0,rel:!0,href:!0});var f=p(o);w=h(f,"WLAN"),f.forEach(d),k=g(e),S=u(e,"A",{class:!0,rel:!0,href:!0});var v=p(S);b=h(v,"System"),v.forEach(d),this.h()},h:function(){v(t,"class","grow flex align-center plr06"),v(t,"rel","prefetch"),v(t,"href","/session"),v(s,"class","grow flex align-center plr06"),v(s,"rel","prefetch"),v(s,"href","/sync"),v(o,"class","grow flex align-center plr06"),v(o,"rel","prefetch"),v(o,"href","/network"),v(S,"class","grow flex align-center plr06"),v(S,"rel","prefetch"),v(S,"href","/system")},m:function(e,i){y(e,t,i),m(t,n),y(e,r,i),y(e,s,i),m(s,a),y(e,c,i),y(e,o,i),m(o,w),y(e,k,i),y(e,S,i),m(S,b)},p:x,i:x,o:x,d:function(e){e&&d(t),e&&d(r),e&&d(s),e&&d(c),e&&d(o),e&&d(k),e&&d(S)}}}var L="Waiting for Backend";function N(e,t,n){var r,s,a;w(e,E,(function(e){return n(5,s=e)})),w(e,$,(function(e){return n(6,a=e)}));var c,o,i,l=k().page;function f(){return u.apply(this,arguments)}function u(){return(u=b(A.mark((function e(){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.grab();case 2:console.log("[/:index.svelte] retrying for backend..."),!i.active&&a?"wait"==a.type&&a.message==L?(console.log("[/:index.svelte] ‚ÑπÔ∏è‚≠ïÔ∏è retrying for backend in 3 seconds"),setTimeout(f,3e3)):console.log("[/:index.svelte] ‚ÑπÔ∏è‚úÖ cancelled wait for backend"):$.set(void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return w(e,l,(function(e){return n(3,r=e)})),S(b(A.mark((function e(){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[/:index.svelte] üìä onMount main menu..."),e.next=3,E.grab();case 3:i.active?o.ssid||"/"!=r.path&&""!=r.path||R.get("/ping?as=json").then((function(){console.log("[/:index.svelte] üêá‚úÖ directus successfully pinged")})).catch((function(){$.set({type:"wlan",message:"Could not connect to API",close:"Skip",actions:[["Setup WLAN","/network"]]})})):(console.log("[/:index.svelte] ‚Ñπ‚ùå no backend, looping..."),$.set({type:"wait",message:L,close:"Skip"}),setTimeout(f,3e3));case 4:case"end":return e.stop()}}),e)})))),e.$$.update=function(){32&e.$$.dirty&&n(4,c=s||{}),16&e.$$.dirty&&(o=c.wlan0||{}),16&e.$$.dirty&&(i=c.backend||{})},[l]}var D=function(t){e(i,o);var n=W(i);function i(e){var t;return r(this,i),t=n.call(this),s(c(t),e,N,j,a,{}),t}return i}();export default D;
