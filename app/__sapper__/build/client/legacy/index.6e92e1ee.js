import{_ as e,a as n,b as t,c as r,i as s,s as a,d as c,S as o,e as i,t as l,f,g as u,h as p,j as h,k as g,l as d,m as v,n as y,o as m,p as x,q as w,r as k,u as S,v as b,w as A,x as R,y as E,z as W}from"./client.7a5f01ae.js";function j(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,a=n(e);if(r){var c=n(this).constructor;s=Reflect.construct(a,arguments,c)}else s=a.apply(this,arguments);return t(this,s)}}function L(e){var n,t,r,s,a,c,o,w,k,S,b;return{c:function(){n=i("a"),t=l("Sessions"),r=f(),s=i("a"),a=l("Sync"),c=f(),o=i("a"),w=l("WLAN"),k=f(),S=i("a"),b=l("System"),this.h()},l:function(e){n=u(e,"A",{class:!0,rel:!0,href:!0});var i=p(n);t=h(i,"Sessions"),i.forEach(g),r=d(e),s=u(e,"A",{class:!0,rel:!0,href:!0});var l=p(s);a=h(l,"Sync"),l.forEach(g),c=d(e),o=u(e,"A",{class:!0,rel:!0,href:!0});var f=p(o);w=h(f,"WLAN"),f.forEach(g),k=d(e),S=u(e,"A",{class:!0,rel:!0,href:!0});var v=p(S);b=h(v,"System"),v.forEach(g),this.h()},h:function(){v(n,"class","grow flex align-center plr06"),v(n,"rel","prefetch"),v(n,"href","/session"),v(s,"class","grow flex align-center plr06"),v(s,"rel","prefetch"),v(s,"href","/sync"),v(o,"class","grow flex align-center plr06"),v(o,"rel","prefetch"),v(o,"href","/network"),v(S,"class","grow flex align-center plr06"),v(S,"rel","prefetch"),v(S,"href","/system")},m:function(e,i){y(e,n,i),m(n,t),y(e,r,i),y(e,s,i),m(s,a),y(e,c,i),y(e,o,i),m(o,w),y(e,k,i),y(e,S,i),m(S,b)},p:x,i:x,o:x,d:function(e){e&&g(n),e&&g(r),e&&g(s),e&&g(c),e&&g(o),e&&g(k),e&&g(S)}}}var N="Waiting for Backend";function D(e,n,t){var r,s,a;w(e,E,(function(e){return t(1,r=e)})),w(e,R,(function(e){return t(3,a=e)}));var c=k().page;function o(){return i.apply(this,arguments)}function i(){return(i=b(A.mark((function e(){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.grab();case 2:console.log("[/:index.svelte] retrying for backend..."),!r.backend.active&&a?"wait"==a.type&&a.message==N?(console.log("[/:index.svelte] ‚ÑπÔ∏è‚≠ïÔ∏è retrying for backend in 3 seconds"),setTimeout(o,3e3)):console.log("[/:index.svelte] ‚ÑπÔ∏è‚úÖ cancelled wait for backend"):R.set(void 0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return w(e,c,(function(e){return t(2,s=e)})),S(b(A.mark((function e(){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[/:index.svelte] üìä onMount main menu..."),e.next=3,E.grab();case 3:r.backend.active?r.wlan0.ssid||"/"!=s.path&&""!=s.path||W.get("/ping?as=json").then((function(){console.log("[/:index.svelte] üêá‚úÖ directus successfully pinged")})).catch((function(){R.set({type:"wlan",message:"Could not connect to API",close:"Skip",actions:[["Setup WLAN","/network"]]})})):(console.log("[/:index.svelte] ‚Ñπ‚ùå no backend, looping..."),R.set({type:"wait",message:N,close:"Skip"}),setTimeout(o,3e3));case 4:case"end":return e.stop()}}),e)})))),[c]}var P=function(n){e(i,o);var t=j(i);function i(e){var n;return r(this,i),n=t.call(this),s(c(n),e,D,L,a,{}),n}return i}();export default P;
