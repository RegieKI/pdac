import{v as e,w as t,A as n,_ as a,a as s,b as r,c as o,i as c,s as i,d as u,S as f,B as l,e as v,t as h,f as p,g,h as d,j as m,k as w,l as y,m as $,C as E,n as k,o as b,D,E as I,F as S,G as x,H as N,I as R,J as V,K as L,L as A,q as P,u as j,y as J,M as q}from"./client.c5348f98.js";function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return r(this,n)}}function C(e,t,n){var a=e.slice();return a[10]=t[n],a[12]=n,a}function F(e){var t,n,a,s,r,o,c,i,u,f=e[10].timestamp+"",l=e[10].message+"";return{c:function(){t=v("div"),n=v("span"),a=h("["),s=h(f),r=h("]"),o=p(),c=v("span"),i=h(l),u=p(),this.h()},l:function(e){t=g(e,"DIV",{});var v=d(t);n=g(v,"SPAN",{class:!0});var h=d(n);a=m(h,"["),s=m(h,f),r=m(h,"]"),h.forEach(w),o=y(v),c=g(v,"SPAN",{});var p=d(c);i=m(p,l),p.forEach(w),u=y(v),v.forEach(w),this.h()},h:function(){$(n,"class","fade"),E(c,"success",e[10].type==O),E(c,"fail",e[10].type==M)},m:function(e,f){k(e,t,f),b(t,n),b(n,a),b(n,s),b(n,r),b(t,o),b(t,c),b(c,i),b(t,u)},p:function(e,t){1&t&&f!==(f=e[10].timestamp+"")&&D(s,f),1&t&&l!==(l=e[10].message+"")&&D(i,l),1&t&&E(c,"success",e[10].type==O),1&t&&E(c,"fail",e[10].type==M)},d:function(e){e&&w(t)}}}function G(e){var t,n,a,s,r,o,c,i,u,f,E;t=new l({});for(var P=e[0],j=[],J=0;J<P.length;J+=1)j[J]=F(C(e,P,J));return{c:function(){I(t.$$.fragment),n=p(),a=v("div"),s=v("div"),r=h(e[1]),o=p(),c=v("div"),i=h(e[2]),u=p(),f=v("div");for(var l=0;l<j.length;l+=1)j[l].c();this.h()},l:function(l){S(t.$$.fragment,l),n=y(l),a=g(l,"DIV",{class:!0});var v=d(a);s=g(v,"DIV",{});var h=d(s);r=m(h,e[1]),h.forEach(w),o=y(v),c=g(v,"DIV",{});var p=d(c);i=m(p,e[2]),p.forEach(w),v.forEach(w),u=y(l),f=g(l,"DIV",{class:!0});for(var $=d(f),E=0;E<j.length;E+=1)j[E].l($);$.forEach(w),this.h()},h:function(){$(a,"class","plr1"),$(f,"class","konsole p04")},m:function(e,l){x(t,e,l),k(e,n,l),k(e,a,l),b(a,s),b(s,r),b(a,o),b(a,c),b(c,i),k(e,u,l),k(e,f,l);for(var v=0;v<j.length;v+=1)j[v].m(f,null);E=!0},p:function(e,t){var n=N(t,1)[0];if((!E||2&n)&&D(r,e[1]),(!E||4&n)&&D(i,e[2]),1&n){var a;for(P=e[0],a=0;a<P.length;a+=1){var s=C(e,P,a);j[a]?j[a].p(s,n):(j[a]=F(s),j[a].c(),j[a].m(f,null))}for(;a<j.length;a+=1)j[a].d(1);j.length=P.length}},i:function(e){E||(R(t.$$.fragment,e),E=!0)},o:function(e){V(t.$$.fragment,e),E=!1},d:function(e){L(t,e),e&&w(n),e&&w(a),e&&w(u),e&&w(f),A(j,e)}}}function H(e,t){return K.apply(this,arguments)}function K(){return(K=e(t.mark((function e(a,s){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(a,s,this));case 1:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var M="❌",O="✅";function T(e){console.log("[overview.svelte] 👁 ✅  opened websocket...",e.currentTarget.url)}function W(e){console.log("[overview.svelte] 👁 ❌  opened websocket...",e)}function _(n,a,s){var r,o;P(n,J,(function(e){return s(6,r=e)})),P(n,q,(function(e){return s(0,o=e)}));var c,i,u,f,l=a.data,v={};function h(e){console.log("[overview.svelte] 👁 ✨  received websocket message...",e.data),function(e){try{var t=JSON.parse(e);q.update((function(e){for(e.unshift({timestamp:t.timestamp,type:t.type,message:t.message});e.length>80;)e.slice(1);return e})),console.log("[overview.svelte] 👁 ✨ ✅  parsed socket message:",o.length,o),s(5,v=t.config)}catch(e){console.log("[overview.svelte] 👁 ✨ ❌  error parsing message:",e.message)}}(e.data)}return j(e(t.mark((function e(){return t.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[overview.svelte] 👁 mounted overview..."),J.grab().then((function(){var e="ws://".concat(r.hostname,".local:8765");console.log("[overview.svelte] 👁 ⚡️  opening websocket...",e),(c=new WebSocket(e)).addEventListener("open",T),c.addEventListener("message",h),c.addEventListener("error",W)})).catch((function(e){console.log("[overview.svelte] 👁 ❌  could not grab info:",e.message)}));case 2:case"end":return e.stop()}}),e)})))),n.$$set=function(e){"data"in e&&s(3,l=e.data)},n.$$.update=function(){32&n.$$.dirty&&s(7,i=v.status||{}),128&n.$$.dirty&&s(1,u=i.title||"No title"),128&n.$$.dirty&&s(2,f=i.message||"No message")},[o,u,f,l]}var z=function(e){a(n,f);var t=B(n);function n(e){var a;return o(this,n),a=t.call(this),c(u(a),e,_,G,i,{data:3}),a}return n}();export default z;export{H as preload};
